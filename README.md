# åœ¨çº¿ç¬”è®°å¹³å°

ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„åœ¨çº¿ç¬”è®°åº”ç”¨ï¼Œæä¾›å¯Œæ–‡æœ¬ç¼–è¾‘ã€ç¬”è®°ç®¡ç†ã€ç”¨æˆ·è®¤è¯ã€**å®æ—¶åä½œç¼–è¾‘**ç­‰åŠŸèƒ½ï¼ŒåŸºäºç°ä»£WebæŠ€æœ¯æ ˆæ„å»ºã€‚

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **å¯Œæ–‡æœ¬ç¼–è¾‘**ï¼šä½¿ç”¨Plate.jsæ„å»ºçš„å¼ºå¤§ç¼–è¾‘å™¨ï¼Œæ”¯æŒå¤šç§æ ¼å¼å’ŒåŠŸèƒ½
- âœ… **å®æ—¶åä½œç¼–è¾‘**ï¼šä½¿ç”¨Liveblockså®ç°å¤šäººå®æ—¶åä½œç¼–è¾‘ç¬”è®°
- âœ… **ç¬”è®°ç®¡ç†**ï¼šåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤å’Œæœç´¢ç¬”è®°
- âœ… **ç”¨æˆ·è®¤è¯**ï¼šå®‰å…¨çš„ç™»å½•å’Œæ³¨å†Œç³»ç»Ÿ
- âœ… **æƒé™ç®¡ç†**ï¼šç¬”è®°æ‰€æœ‰è€…å¯ä»¥æˆæƒå…¶ä»–ç”¨æˆ·æŸ¥çœ‹æˆ–ç¼–è¾‘ç¬”è®°
- âœ… **æœ¬åœ°è‡ªåŠ¨ä¿å­˜**ï¼šå®æ—¶ä¿å­˜ç¼–è¾‘å†…å®¹åˆ°æœ¬åœ°å­˜å‚¨ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±
- âœ… **äº‘ç«¯åŒæ­¥**ï¼šè‡ªåŠ¨å°†ç¬”è®°åŒæ­¥åˆ°Supabaseæ•°æ®åº“ï¼ˆæ¯10ç§’è‡ªåŠ¨å¿«ç…§ï¼‰
- âœ… **å“åº”å¼è®¾è®¡**ï¼šé€‚é…å„ç§è®¾å¤‡å’Œå±å¹•å°ºå¯¸

### é«˜çº§åŠŸèƒ½
- ğŸ“ **Markdownæ”¯æŒ**ï¼šæ”¯æŒMarkdownæ ¼å¼çš„å†…å®¹
- ğŸ¨ **å¤šç§ç¼–è¾‘å·¥å…·**ï¼šè¡¨æ ¼ã€åˆ—è¡¨ã€ä»£ç å—ã€é“¾æ¥ç­‰
- ğŸ” **æœç´¢åŠŸèƒ½**ï¼šå¿«é€ŸæŸ¥æ‰¾ç¬”è®°
- âš™ï¸ **è®¾ç½®é¢æ¿**ï¼šä¸ªæ€§åŒ–åº”ç”¨è®¾ç½®
- ğŸ“± **ç§»åŠ¨å‹å¥½**ï¼šæ”¯æŒç§»åŠ¨è®¾å¤‡ç¼–è¾‘
- ğŸ”„ **å®æ—¶åŒæ­¥**ï¼šä½¿ç”¨CRDTæŠ€æœ¯ä¿è¯å¤šäººç¼–è¾‘æ—¶çš„æ•°æ®ä¸€è‡´æ€§

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: Next.js 16
- **UIåº“**: React 18
- **ç¼–è¾‘å™¨**: Plate.js (å¯Œæ–‡æœ¬ç¼–è¾‘å™¨)
- **åä½œç¼–è¾‘**: Liveblocks + Yjs
- **UIç»„ä»¶**: @shadcn/ui, Radix UI
- **æ ·å¼**: Tailwind CSS
- **çŠ¶æ€ç®¡ç†**: React Hooks
- **å·¥å…·åº“**: clsx, lodash, date-fns

### åç«¯
- **API**: Next.js API Routes
- **æ•°æ®åº“**: Supabase
- **è®¤è¯**: Supabase Auth
- **åä½œæœåŠ¡**: Liveblocks
- **æ–‡ä»¶ä¸Šä¼ **: UploadThing
- **æœåŠ¡å™¨**: Express.js (å¯é€‰)

### AIé›†æˆï¼ˆæš‚æœªå®ç°ï¼Œä»åœ¨å¼€å‘ä¸­ï¼‰
- **AI SDK**: @ai-sdk/react
- **AIåŠ©æ‰‹**: é›†æˆAIå‘½ä»¤å’Œ copilots

## é¡¹ç›®ç»“æ„

```
online-note-platform/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ (main)/           # ä¸»è¦åº”ç”¨é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/    # ç¬”è®°ä»ªè¡¨æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ editor/       # å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ search/       # ç¬”è®°æœç´¢
â”‚   â”‚   â”‚   â””â”€â”€ settings/     # è®¾ç½®é¡µé¢
â”‚   â”‚   â”œâ”€â”€ api/              # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth/             # è®¤è¯é¡µé¢
â”‚   â”‚   â””â”€â”€ layout.tsx        # åº”ç”¨å¸ƒå±€
â”‚   â”œâ”€â”€ components/           # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/               # UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ editor-kit.tsx    # ç¼–è¾‘å™¨å·¥å…·é›†
â”‚   â”‚   â””â”€â”€ plate-editor.tsx  # ä¸»ç¼–è¾‘å™¨ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/                # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ use-notes.ts      # ç¬”è®°ç®¡ç†
â”‚   â”‚   â””â”€â”€ use-auth.ts       # è®¤è¯ç®¡ç†
â”‚   â”œâ”€â”€ lib/                  # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ supabase.ts       # Supabaseå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ utils.ts          # é€šç”¨å·¥å…·
â”‚   â””â”€â”€ types/                # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ public/                   # é™æ€èµ„æº
â”œâ”€â”€ server/                   # å¯é€‰çš„ExpressæœåŠ¡å™¨
â””â”€â”€ package.json              # é¡¹ç›®é…ç½®
```

## å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶
- Node.js 18+ æˆ– pnpm å®‰è£…
- Supabase è´¦æˆ·å’Œé¡¹ç›®
- UploadThing è´¦æˆ· (å¯é€‰)

### å®‰è£…

1. å…‹éš†ä»“åº“
```bash
git clone <repository-url>
cd online-note-platform
```

2. å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨ npm
npm install

# æˆ–ä½¿ç”¨ pnpm
pnpm install
```

### é…ç½®

1. åˆ›å»º `.env.local` æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š
```
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
LIVEBLOCKS_SECRET_KEY=your-liveblocks-secret-key
```

å‚è€ƒ `.env.example` æ–‡ä»¶æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚

2. é…ç½® Supabase æ•°æ®åº“ï¼š
   - åˆ›å»º `notes` è¡¨ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
     - `id` (UUID, ä¸»é”®)
     - `title` (æ–‡æœ¬)
     - `content` (æ–‡æœ¬æˆ–JSON)
     - `user_id` (UUID, å¤–é”®å…³è”ç”¨æˆ·)
     - `created_at` (æ—¶é—´æˆ³)
     - `updated_at` (æ—¶é—´æˆ³)
   - åˆ›å»º `note_permissions` è¡¨ç”¨äºç¬”è®°å…±äº«ï¼š
     - è¿è¡Œ `database/migrations/001_create_note_permissions.sql` ä¸­çš„SQLè„šæœ¬
   - é…ç½®è¡Œçº§å®‰å…¨ç­–ç•¥ï¼Œç¡®ä¿ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„ç¬”è®°æˆ–è¢«æˆæƒçš„ç¬”è®°

3. é…ç½® Liveblocksï¼š
   - è®¿é—® [Liveblocks Dashboard](https://liveblocks.io/dashboard)
   - åˆ›å»ºæ–°é¡¹ç›®æˆ–ä½¿ç”¨ç°æœ‰é¡¹ç›®
   - è·å– Secret Key å¹¶æ·»åŠ åˆ° `.env.local`
   - è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒ `LIVEBLOCKS_INTEGRATION.md`

### è¿è¡Œ

1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
# æˆ–
pnpm dev
```

2. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
# æˆ–
pnpm build
```

### å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨

```bash
npm run start
# æˆ–
pnpm start
```

## ä¸»è¦åŠŸèƒ½è¯´æ˜

### ç¬”è®°ç¼–è¾‘å™¨

ä½¿ç”¨ Plate.js æ„å»ºçš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ”¯æŒï¼š
- æ ‡é¢˜å’Œæ®µè½
- åˆ—è¡¨ (æœ‰åºå’Œæ— åº)
- ä»£ç å—
- è¡¨æ ¼
- é“¾æ¥å’Œå›¾ç‰‡
- æ³¨é‡ŠåŠŸèƒ½
- Markdown æ”¯æŒ

### ç¬”è®°ç®¡ç†

- **åˆ›å»ºç¬”è®°**ï¼šç‚¹å‡»"åˆ›å»ºç¬”è®°"æŒ‰é’®å¼€å§‹æ–°ç¬”è®°
- **ç¼–è¾‘ç¬”è®°**ï¼šåœ¨ç¼–è¾‘å™¨ä¸­ä¿®æ”¹ç¬”è®°å†…å®¹
- **åˆ é™¤ç¬”è®°**ï¼šåœ¨ä»ªè¡¨æ¿ä¸­é€‰æ‹©ç¬”è®°è¿›è¡Œåˆ é™¤
- **æœç´¢ç¬”è®°**ï¼šä½¿ç”¨æœç´¢åŠŸèƒ½å¿«é€ŸæŸ¥æ‰¾ç‰¹å®šç¬”è®°

### ç”¨æˆ·è®¤è¯

- **æ³¨å†Œ**ï¼šåˆ›å»ºæ–°è´¦æˆ·
- **ç™»å½•**ï¼šä½¿ç”¨ç°æœ‰è´¦æˆ·ç™»å½•
- **å®‰å…¨**ï¼šä½¿ç”¨ Supabase Auth ç¡®ä¿ç”¨æˆ·æ•°æ®å®‰å…¨

## API ç«¯ç‚¹

### ç¬”è®°ç›¸å…³
- `GET /api/notes` - è·å–ç”¨æˆ·ç¬”è®°
- `POST /api/notes` - åˆ›å»ºæ–°ç¬”è®°
- `PUT /api/notes/:id` - æ›´æ–°ç¬”è®°
- `DELETE /api/notes/:id` - åˆ é™¤ç¬”è®°

### AI ç›¸å…³ (æš‚æœªå®ç°ï¼Œä»åœ¨å¼€å‘ä¸­)
- `POST /api/ai/command` - æ‰§è¡ŒAIå‘½ä»¤
- `POST /api/ai/copilot` - AIåŠ©æ‰‹åŠŸèƒ½

## å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript ç¼–å†™ç±»å‹å®‰å…¨çš„ä»£ç 
- éµå¾ª Next.js æœ€ä½³å®è·µ
- ä½¿ç”¨ Tailwind CSS è¿›è¡Œæ ·å¼è®¾è®¡
- ç»„ä»¶ä½¿ç”¨ PascalCase å‘½å
- å‡½æ•°å’Œå˜é‡ä½¿ç”¨ camelCase å‘½å

### æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
npm test
# æˆ–
pnpm test
```

###  linting

```bash
# è¿è¡Œ ESLint
npm run lint
# æˆ–
pnpm lint
```


## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## è‡´è°¢

- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [Supabase](https://supabase.com/) - å¼€æº Firebase æ›¿ä»£å“
- [Plate.js](https://platejs.org/) - å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ¡†æ¶
- [@shadcn/ui](https://ui.shadcn.com/) - UI ç»„ä»¶åº“
- [Tailwind CSS](https://tailwindcss.com/) - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶

## è”ç³»æ–¹å¼

è¯¥é¡¹ç›®ä»åœ¨å¼€å‘ä¸­ï¼Œå¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- Email: [2513690786@qq.com]
- GitHub: [Lavender695](https://github.com/Lavender695)

---
